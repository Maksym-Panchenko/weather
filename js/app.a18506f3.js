(function(){"use strict";var t={2064:function(t,e,a){var s=a(6369),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("CustomLoader"),e("MainHeader"),e("MainContent"),e("CustomSnackbar")],1)},i=[],n=function(){var t=this,e=t._self._c;return e("header",{staticClass:"header"},[e("div",{staticClass:"header__content content"},[t._m(0),e("button",{staticClass:"button button_icon button_flat button_small",on:{click:function(e){return t.$store.dispatch("changeLang")}}},[t._v(t._s(t.lang["lang"][t.$store.state.lang]))])])])},o=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"header__link",attrs:{href:"#"}},[e("img",{staticClass:"header__logo",attrs:{src:a(5522),alt:"Logo Open Weather"}})])}],c={empty:{en:"",ua:""},lang:{en:"en",ua:"юа"},noItemsInList:{en:"There are no cities in this list yet",ua:"У цьому списку поки що немає міст"},temp:{en:"temperature",ua:"температура"},tabSearch:{en:"Search",ua:"Пошук"},tabFavorite:{en:"Favorite",ua:"Обране"},modalButtonCancel:{en:"Cancel",ua:"Відміна"},modalButtonAgree:{en:"Ok",ua:"Так"},modalMessageDeleteCity:{en:"Remove the city?",ua:"Видалити місто?"},modalMessageDeleteFavoriteCity:{en:"Remove the favorite city?",ua:"Видалити обране місто?"},snackbarSuccessRemoveCity:{en:"The city is removed from the favorites",ua:"Місто видалене з обраних"},snackbarSuccessAddCity:{en:"The city is added to favorites",ua:"Місто додано до обраного"},snackbarErrorAddCity:{en:"The favorite list can contain no more than 5 cities",ua:"Список обраних може вміщувати не більше 5 міст"},snackbarErrorAddCityToSelected:{en:"The list can contain no more than 5 cities",ua:"Список може вміщувати не більше 5 міст"}},l={data(){return{lang:c}}},u=l,d=a(1001),h=(0,d.Z)(u,n,o,!1,null,"1bc7e868",null),m=h.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("modal-confirm",{attrs:{isActive:t.showModal,messageOptions:t.messageOptions},on:{closeModal:function(e){t.showModal=!1}}}),e("div",{staticClass:"content"},[e("div",{staticClass:"content__tabs"},[e("button",{staticClass:"button",class:{button_active:"search"===t.selectedTab},on:{click:function(e){return t.selectTab("search")}}},[t._v(t._s(t.lang["tabSearch"][t.$store.state.lang]))]),e("button",{staticClass:"button",class:{button_active:"favorite"===t.selectedTab},on:{click:function(e){return t.selectTab("favorite")}}},[t._v(t._s(t.lang["tabFavorite"][t.$store.state.lang]))])]),e("div",{staticClass:"main__content",attrs:{id:"cards"}},["search"===t.selectedTab?[t._l(t.$store.state.searchedCites,(function(a,s){return e("WeatherCard",{key:a.city+a.country+s,attrs:{card:a},on:{removeCity:function(e){return t.removeCity(s)},replaceCity:function(e){return t.replaceCity(e,s)}}})})),0===t.$store.state.searchedCites.length?e("EmptyList"):t._e(),e("div",{staticClass:"main__action"},[e("button",{staticClass:"button button_icon",on:{click:t.addNewCity}},[e("img",{attrs:{src:a(4355),alt:"Add"}})])])]:[t._l(t.$store.state.favoriteCities,(function(a,s){return e("WeatherCard",{key:a.city+a.country+s,attrs:{mode:"favorite",card:a},on:{removeFavoriteCity:function(e){return t.removeFavoriteCity(a)}}})})),0===t.$store.state.favoriteCities.length?e("EmptyList"):t._e()]],2)])],1)},v=[],C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},["search"===t.mode?e("div",{staticClass:"card__header"},[e("CustomAutocomplete",{on:{updateCity:t.updateCity}}),e("div",{staticClass:"card__actions"},[t.inFavorites?e("button",{staticClass:"button button_icon button_small button_flat",on:{click:function(e){return t.removeCityFromFavorite(!0)}}},[e("img",{attrs:{src:a(6338),alt:"Remove from favorite"}})]):t._e(),t.inFavorites?t._e():e("button",{staticClass:"button button_icon button_small button_flat",on:{click:t.addCityToFavorite}},[e("img",{attrs:{src:a(1490),alt:"Add to favorite"}})]),e("button",{staticClass:"button button_icon button_small button_flat",on:{click:t.removeCityFromSearched}},[e("img",{attrs:{src:a(5480),alt:"Remove"}})])])],1):e("div",{staticClass:"card__header card__header_reverse"},[e("div",{staticClass:"card__actions"},[e("button",{staticClass:"button button_icon button_small button_flat",on:{click:function(e){return t.removeCityFromFavorite(!1)}}},[e("img",{attrs:{src:a(5480),alt:"Remove"}})])])]),e("div",{staticClass:"card__data"},[e("div",{staticClass:"card__column"},[e("div",{staticClass:"card__city"},[t._v(t._s(t.card.city)+" ("+t._s(t.card.country)+")")]),void 0!==t.card.temp?e("div",{staticClass:"card__temp"},[t._v(t._s(t.lang.temp[t.currentLang])+" "+t._s(t.card.temp)+"°C")]):t._e(),t.card.weather?e("div",{staticClass:"card__weather"},[t._v("("+t._s(t.card.weather)+")")]):t._e()]),this.currentCard.weatherIcon?e("div",{staticClass:"card__column"},[e("img",{staticClass:"card__image",attrs:{src:t.imgSrc,alt:"Weather"}})]):t._e()]),e("div",{staticClass:"card__graph"},[e("canvas",{ref:"chartCanvas"})])])},f=[],y=function(){var t=this,e=t._self._c;return e("label",{staticClass:"autocomplete"},[e("div",{staticClass:"autocomplete__text"},[t._v("Enter city")]),e("div",{staticClass:"autocomplete__input-wrapper"},[e("input",{staticClass:"autocomplete__input",attrs:{type:"text",placeholder:"..."},on:{input:t.inputName,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.clearItems.apply(null,arguments)}}}),e("ul",{staticClass:"autocomplete__list"},t._l(t.list,(function(a){return e("li",{key:a.cityName+"."+a.countryName,staticClass:"autocomplete__list-item",on:{click:function(e){return t.selectCity(a)}}},[t._v(t._s(a.cityName)+" - "+t._s(a.countryName))])})),0)])])},g=[],_=(a(7658),a(3822));s.ZP.use(_.ZP);const b=new _.ZP.Store({state:{lang:"ua",favoriteCities:[],searchedCites:[],showSnackbar:!1,statusSnackbar:"success",textSnackbar:"empty",isLoading:!1},mutations:{showSnackbar(t){t.showSnackbar=!0},hideSnackbar(t){t.showSnackbar=!1},addToFavorite(t,e){t.favoriteCities.length<5?(t.favoriteCities.push(e),t.textSnackbar="snackbarSuccessAddCity",t.statusSnackbar="success",b.dispatch("displaySnackbar"),this.commit("saveFavorites")):(t.textSnackbar="snackbarErrorAddCity",t.statusSnackbar="error",b.dispatch("displaySnackbar"))},removeFromFavorite(t,e){const a=t.favoriteCities.findIndex((t=>t.city===e.city&&t.country===e.country));a>=0&&(t.favoriteCities.splice(a,1),t.textSnackbar="snackbarSuccessRemoveCity",t.statusSnackbar="success",b.dispatch("displaySnackbar"),this.commit("saveFavorites"))},addCityToSearched(t,e){t.searchedCites.push(e)},removeCityFromSearched(t,e){t.searchedCites.splice(e,1)},replaceCity(t,{city:e,index:a}){t.searchedCites.splice(a,1,e)},saveFavorites(t){t.favoriteCities.length?localStorage.setItem("favorite",JSON.stringify(t.favoriteCities.map((t=>({city:t.city,country:t.country}))))):localStorage.removeItem("favorite")},loadFavorites(t){const e=localStorage.getItem("favorite");e&&(t.favoriteCities=JSON.parse(e))},startLoad(t){t.isLoading=!0},endLoad(t){t.isLoading=!1},switchLang(t){t.lang="ua"===t.lang?"en":"ua"},updateFavoriteList(t,e){t.favoriteCities=e},updateSearchedList(t,e){t.searchedCites=e}},actions:{displaySnackbar({commit:t}){t("showSnackbar"),setTimeout((()=>{t("hideSnackbar")}),3e3)},async addCityToSearched({state:t,commit:e},a){if(t.searchedCites.length<5){const t=await $(a.city,a.country),s=Object.assign(t[0],{graph:t[1]});e("addCityToSearched",s)}else t.textSnackbar="snackbarErrorAddCityToSelected",t.statusSnackbar="error",b.dispatch("displaySnackbar")},async loadFavorites(t){if(t.commit("loadFavorites"),b.state.favoriteCities.length){t.commit("startLoad");const e=[];for(let t in b.state.favoriteCities){const a=b.state.favoriteCities[t].city,s=b.state.favoriteCities[t].country,r=await $(a,s);e.push(Object.assign(r[0],{graph:r[1]},{id:Date.now()+t.toString()}))}t.commit("updateFavoriteList",e),t.commit("endLoad")}},async loadSelected(t){if(b.state.searchedCites.length){t.commit("startLoad");const e=[];for(let t in b.state.searchedCites){const a=b.state.searchedCites[t].city,s=b.state.searchedCites[t].country,r=await $(a,s);e.push(Object.assign(r[0],{graph:r[1]},{id:Date.now()+t.toString()}))}t.commit("updateSearchedList",e),t.commit("endLoad")}},async changeLang(t){t.commit("switchLang"),t.dispatch("loadFavorites"),t.dispatch("loadSelected")}},getters:{inFavorites:t=>e=>t.favoriteCities.some((t=>t.city===e.city&&t.country===e.country))}});var k=b;const S="62eed23c7dfe6e14e59e69936aea7330",w="metric";function $(t,e){const a=k.state.lang,s=`${t},${e}`,r=`https://api.openweathermap.org/data/2.5/weather?q=${s}&appid=${S}&lang=${a}&units=${w}`,i=`https://api.openweathermap.org/data/2.5/forecast?q=${s}&appid=${S}&lang=${a}&units=${w}`;return Promise.all([F(r),x(i)])}function F(t){return fetch(t).then((t=>t.json())).then((t=>({city:t.name,country:t.sys.country,temp:Math.round(t.main.temp),weather:t.weather[0].description,weatherIcon:t.weather[0].icon})))}function x(t){return fetch(t).then((t=>t.json())).then((t=>t.list.map((t=>({value:t.main.temp,label:new Date(+(t.dt+"100"))}))).filter(((t,e)=>e<8))))}async function L(t){const e=`https://api.openweathermap.org/data/2.5/find?q=${t}&type=like&appid=${S}`,a=await fetch(e),s=await a.json();return s.list.map((t=>({cityName:t.name,countryName:t.sys.country})))}var O={data(){return{searchCities:L,list:[]}},methods:{async inputName(t){const e=t.target.value;e.length>2?this.list=await this.searchCities(e):this.list.splice(0)},clearItems(){this.list.splice(0)},selectCity(t){this.clearItems(),this.$emit("updateCity",t)}}},T=O,M=(0,d.Z)(T,y,g,!1,null,"1d5662db",null),A=M.exports,j=a(9646);j.kL.register(j.jn,j.od,j.ST,j.uw,j.f$);var I={components:{CustomAutocomplete:A},props:{card:{type:Object,required:!0},mode:{type:String,default:"search"}},data(){return{lang:c,currentCard:this.card,chartData:{labels:this.card.graph?this.card.graph.map((t=>t.label.getHours()+":00")):[],datasets:[{data:this.card.graph?this.card.graph.map((t=>t.value)):[],backgroundColor:"rgba(0, 0, 255, 0.5)",borderColor:"blue",borderWidth:1,lineTension:.4}]}}},computed:{imgSrc(){return this.currentCard.weatherIcon?`https://openweathermap.org/img/w/${this.currentCard.weatherIcon}.png`:""},currentLang(){return this.$store.state.lang},inFavorites(){return this.$store.getters.inFavorites({city:this.currentCard.city,country:this.currentCard.country})}},methods:{updateCity(t){this.$store.commit("startLoad"),$(t.cityName,t.countryName).then((t=>{this.currentCard=Object.assign(t[0],{graph:t[1]}),this.$emit("replaceCity",this.currentCard),this.chartData.datasets[0].data=[...t[1].map((t=>t.value))],this.chart.update(),this.$store.commit("endLoad")}))},addCityToFavorite(){this.$store.commit("addToFavorite",this.currentCard)},removeCityFromFavorite(t){t?this.$store.commit("removeFromFavorite",{city:this.currentCard.city,country:this.currentCard.country}):this.$emit("removeFavoriteCity")},removeCityFromSearched(){this.$emit("removeCity")},renderChart(){if(!this.currentCard.graph)return;const t=this.$refs.chartCanvas.getContext("2d");this.chart=new j.kL(t,{type:"line",data:this.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{ticks:{beginAtZero:!0}}}}})}},mounted(){this.renderChart()}},Z=I,N=(0,d.Z)(Z,C,f,!1,null,"926852da",null),E=N.exports,D=function(){var t=this,e=t._self._c;return t.isActive?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("p",[t._v(t._s(t.message))]),e("div",{staticClass:"modal-buttons"},[e("button",{staticClass:"button",on:{click:function(e){return t.$emit("closeModal")}}},[t._v(t._s(t.lang["modalButtonCancel"][t.$store.state.lang]))]),e("button",{staticClass:"button",on:{click:function(e){return t.messageOptions.confirm()}}},[t._v(t._s(t.lang["modalButtonAgree"][t.$store.state.lang]))])])])]):t._e()},P=[],R={props:{isActive:Boolean,messageOptions:Object},data(){return{lang:c}},computed:{message(){return this.messageOptions.message?this.lang[this.messageOptions.message][this.$store.state.lang]:""}}},W=R,B=(0,d.Z)(W,D,P,!1,null,"11ef444f",null),q=B.exports,H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"empty-block"},[t._v(" "+t._s(t.list["noItemsInList"][t.$store.state.lang])+" ")])},J=[],z={data(){return{list:c}}},G=z,K=(0,d.Z)(G,H,J,!1,null,"79d2a4d4",null),Q=K.exports,U={components:{EmptyList:Q,ModalConfirm:q,WeatherCard:E},data(){return{lang:c,defaultCity:{city:"london",country:"uk"},messageOptions:{},showModal:!1,selectedTab:"search"}},methods:{async start(){this.$store.state.searchedCites.length||this.$store.dispatch("addCityToSearched",this.defaultCity),this.$store.dispatch("loadFavorites")},addNewCity(){this.$store.dispatch("addCityToSearched",this.defaultCity)},removeCity(t){this.messageOptions={message:"modalMessageDeleteCity",confirm:()=>{this.$store.commit("removeCityFromSearched",t),this.showModal=!1}},this.showModal=!0},removeFavoriteCity(t){this.messageOptions={message:"modalMessageDeleteFavoriteCity",confirm:()=>{this.$store.commit("removeFromFavorite",t),this.showModal=!1}},this.showModal=!0},selectTab(t){t!==this.selectedTab&&(this.selectedTab=t)},replaceCity(t,e){this.$store.commit("replaceCity",{city:t,index:e})}},created(){this.start()}},V=U,X=(0,d.Z)(V,p,v,!1,null,null,null),Y=X.exports,tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"snackbar",class:{snackbar_success:"success"===t.statusSnackbar,snackbar_error:"error"===t.statusSnackbar,snackbar_visible:!0===t.showSnackbar}},[e("div",{staticClass:"snackbar__text"},[t._v(t._s(t.lang[t.textSnackbar][t.$store.state.lang]))]),e("button",{staticClass:"snackbar__button"},[e("img",{staticClass:"snackbar__image",attrs:{src:a(5289),alt:"Weather"},on:{click:function(e){return t.$store.commit("hideSnackbar")}}})])])},et=[],at={data(){return{lang:c}},computed:{...(0,_.rn)(["showSnackbar","textSnackbar","statusSnackbar"])}},st=at,rt=(0,d.Z)(st,tt,et,!1,null,"29e22577",null),it=rt.exports,nt=function(){var t=this,e=t._self._c;return t.$store.state.isLoading?e("div",{staticClass:"loader-container"},[e("div",{staticClass:"loader"})]):t._e()},ot=[],ct={},lt=ct,ut=(0,d.Z)(lt,nt,ot,!1,null,"cf8d1ae8",null),dt=ut.exports,ht={name:"App",components:{CustomLoader:dt,CustomSnackbar:it,MainHeader:m,MainContent:Y}},mt=ht,pt=(0,d.Z)(mt,r,i,!1,null,null,null),vt=pt.exports;s.ZP.config.productionTip=!1,new s.ZP({store:k,render:t=>t(vt)}).$mount("#app")},5480:function(t,e,a){t.exports=a.p+"img/close-black.022babc1.svg"},5289:function(t,e,a){t.exports=a.p+"img/close.f623e75c.svg"},5522:function(t,e,a){t.exports=a.p+"img/logo.d18747d0.svg"},4355:function(t,e,a){t.exports=a.p+"img/plus.7f8cd44d.svg"},1490:function(t,e,a){t.exports=a.p+"img/star-outline.c184db37.svg"},6338:function(t,e,a){t.exports=a.p+"img/star.e955acfd.svg"}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,r,i){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],r=t[u][1],i=t[u][2];for(var o=!0,c=0;c<s.length;c++)(!1&i||n>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[c])}))?s.splice(c--,1):(o=!1,i<n&&(n=i));if(o){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,i,n=s[0],o=s[1],c=s[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(c)var u=c(a)}for(e&&e(s);l<n.length;l++)i=n[l],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},s=self["webpackChunkweather"]=self["webpackChunkweather"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(2064)}));s=a.O(s)})();
//# sourceMappingURL=app.a18506f3.js.map